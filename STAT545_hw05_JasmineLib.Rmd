---
title: "STAT545_hw05_JasmineLib"
output: github_document
---
cowplot
gridextratidy

# Homework 5: Factor and Figure Management
```{r}
library(gapminder)
library(tidyverse)
library(plotly)
library(viridis)
library(scales)
#library(dplyr)
```


### Part 1: Factor Management

Task 1.1: Drop a factor to remove Oceania. Remove unused factor levels. Provide concrete information before and after removing these rows and the number of levels of affected factors.
explore the effects of arrange()
explore effects of reordering a factor and try this coupled with arrange() How does this affect figure output?
```{r}

gapminder_highGDP = gapminder %>% 
  filter(gdpPercap > 30000)

levels(gapminder_highGDP$continent)
  
gapminder_highGDP %>% 
  ggplot(aes(continent)) + geom_bar() + 
  scale_x_discrete(drop = FALSE) #shows "hidden factor Oceania"


gapminder_highGDP %>% 
  droplevels() %>%  
  str()


  
  #ggplot(aes(country, gdpPercap)) +
  #geom_point() 
  
  gap_america_2007 = gapminder %>% 
  filter(continent == "Americas", year == 2007)

gap_america_2007 %>% 
mutate(country = fct_reorder(country, gdpPercap)) %>%
 ggplot(aes(gdpPercap, country)) + geom_point()
```


Explore the effects of arrange(). Does merely arranging the data have any effect on, say, a figure?
```{r}
gapminder %>% 
  filter(continent == "Americas" & year == 2007) %>% 
  arrange(desc(country)) %>% 
  ggplot(aes(gdpPercap, country)) + geom_point()



```


explore effects of reordering a factor and try this coupled with arrange() How does this affect figure output?
```{r}
gap_america_2007 %>% 
  mutate(country = fct_reorder(country, lifeExp)) %>% #want to reorder country. how? order by lifeexp
  arrange(desc(country)) %>% 
  ggplot(aes(lifeExp, country)) + geom_point()


gap_america_2007 %>% 
  arrange(desc(country)) %>% 
  mutate(country = fct_reorder(country, lifeExp)) %>% 
  ggplot(aes(lifeExp, country)) + geom_point()

gap_relevel = fct_relevel(gap_america_2007$country, "Haiti")
head(gap_relevel)
  
```

### Part 2: File I/O

```{r}
oil_consumption = read_csv(file ="Oil_Consumption_per_capita.csv")

head(oil_consumption)

?saveRDS()


oil_consumption_2007 = oil_consumption %>% 
  select(`Oil Consumption per capita (tonnes per year)`, "2007") %>% 
  mutate(country = `Oil Consumption per capita (tonnes per year)`, 
         tonnes_per_capita_2007 = `2007`) %>% 
  select(country, tonnes_per_capita_2007)



head(oil_consumption_2007)

```

```{r}
gapminder_2007 = gapminder %>% 
  filter (year == "2007") %>% 
  select(country = "country", pop, gdpPercap, continent) #select the population and gdpPercap data for the year 2007. 
  
gapminder_2007 %>% 
  head() %>% 
  knitr::kable()
```

```{r}
gapminder_oil_2007 = left_join(gapminder_2007, oil_consumption_2007, by= "country") %>% 
  na.omit() 
gapminder_oil_2007

gapminder_oil_2007 %>% 
  mutate(country = fct_reorder(country, tonnes_per_capita_2007)) %>% 
  ggplot(aes(tonnes_per_capita_2007, country)) + geom_point()



  

gapminder_oil_2007 %>% 
  ggplot(aes(pop, tonnes_per_capita_2007))+
  geom_point(alpha = 0.33)+
  theme_bw()+
  facet_wrap(~continent)

```


Try out write.csv:
```{r}
write.csv(gapminder_oil_2007,  "hw5_gapminder_oil_2007.csv")
```

### Part 3: Visualization Design
 






### More? 